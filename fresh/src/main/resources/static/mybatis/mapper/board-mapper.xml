<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
 

	<select id="detail" parameterType="Long" resultType="BoardDTO">
		select board_no, user_no, board_title, board_content, board_write,
		 	   board_date, board_like, board_count, board_del
		from board
		where board_no = #{no} and board_del = '1'
	</select>
	
	<insert id="write" parameterType="BoardDTO">
		insert into board(user_no, board_title, board_content, board_date, board_write)
		values (#{user_no},#{board_title}, #{board_content}, now(), #{board_write})
	</insert>
	
	<select id="com_cnt" parameterType="Long" resultType="Integer">
		select count(*) 
		from comment 
		where board_no = #{no} and com_del = '1'
	</select>
	
	<select id="com_list" parameterType="Long" resultType="CustomCommentDTO">
		select comment.*, user.user_username
		from comment, user 
		where comment.board_no = #{no} and comment.com_del = '1' and user.user_no=comment.user_no
		order by comment.com_cdate desc
	</select>
	
	<select id="main_hot" resultType="BoardDTO">
		select board_no, board_title, board_like, board_count, (board_like+board_count) as board_react
		from board
		order by board_react desc
		limit 10
	</select>
	
	<select id="main_new" resultType="BoardDTO">
		select board_no, board_title, board_like, board_count, board_date
		from board
		order by board_date desc 
		limit 5
	</select>
	
	<select id="boardList" resultType="BoardDTO">
		select board_no, user_no, board_title, board_content, board_write,
		 	   board_date, board_like, board_count, board_del
		from board
		order by board_date desc
	</select>
	
	</mapper>