<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout/basic">
<head>
    <meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="description" content="Orbitor,business,company,agency,modern,bootstrap4,tech,software">
	<meta name="author" content="themefisher.com">
	<th:block th:insert="~{menu.html::metaImport}"></th:block>
	<title th:text="${detail.board_title}">타이틀</title>
	<th:block th:insert="~{menu.html::headImport}"></th:block>
	<!-- Main Stylesheet -->
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
		<!-- 상단바 - 로고, 게시판 메뉴, 검색창, 마이페이지, 로그인 -->
		<th:block th:insert="~{menu.html::navBar}"></th:block>

        <!-- 게시글 상세 내용 -->
        <section class="post-detail">
            <h1 th:text="${detail.board_title}"></h1>
            <p class="meta">
                <span id="postAuthor">작성자: 
                	<span th:text="${detail.board_title}"></span>
                </span> | 
                <span id="postDate">작성시간: 
                	<span th:text="${#dates.format(detail.board_date, 'yyyy-MM-dd HH:mm')}"></span>
                </span> | 
                <span id="postViews">조회수: 
                	<span th:text="${detail.board_count}"></span>
                </span> | 
                <span id="postLikes">좋아요: 
                	<span th:text="${detail.board_like}"></span>
                </span>
            </p>
            <p id="postContent" th:text="${detail.board_content}"></p>

            <!-- 좋아요 및 게시글 수정/삭제 버튼 -->
            <div class="post-actions">
                <button id="likeButton" class="btn">좋아요</button>
                <!-- 글의 작성자가 현재 로그인 한 사람과 같은 경우에만 -->
                <th:block th:if="${detail.user_no == user.user_no}">
                	<a th:href="@{/#}" id="editButton" class="btn" style="display: inline-block;">수정</a>
                	<a th:href="@{/#}" id="deleteButton" class="btn" style="display: inline-block;">삭제</a>
                </th:block>
            </div>
            
        </section>

        <!-- 댓글 섹션 -->
        <section class="comments">
            <h3>댓글 (<span id="commentCount" th:text="${com_count}"></span>)</h3>
            <ul id="commentList">
                <li th:each="comment:${comments}" class="comment-item">
                	<span th:text="${comment.user_username}"></span> : <span th:text="${comment.com_comment}"></span>
                </li>
            </ul>

            <!-- 댓글 페이지네이션 -->
            <div class="pagination" id="pagination"></div>

            <!-- 댓글 작성 폼 -->
            <div id="commentFormContainer">
                <form id="commentForm" class="comment-form">
                	<input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
                    <textarea id="commentContent" placeholder="댓글을 입력하세요"></textarea>
                    <button type="submit" class="btn">댓글 작성</button>
                </form>
                <p id="loginMessage" class="login-message" style="display: none;">로그인 후 댓글을 작성할 수 있습니다.</p>
            </div>

            <!-- 버튼들 배치 -->
            <div class="btn-container">
                <a href="#" class="btn">이전 글</a>
                <a th:href="@{/board}" class="btn">목록</a>
                <a href="#" class="btn">다음 글</a>
                <a th:href="@{/boardWrite}" class="btn">글 작성</a>
            </div>
        </section>
    </div>
   
    <!-- Essential Scripts =====================================-->
    
    <!-- Main jQuery -->
    <script src="plugins/jquery/jquery.js"></script>
</body>
</html>
